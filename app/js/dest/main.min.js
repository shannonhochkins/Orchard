/*! SassyWebTemplate - v0.1.4 - 08-17-2015 */"use strict";var app=angular.module("app",["angular-loading-bar","ngRoute"]).run(["$rootScope","$location",function(a,b){a.menuItems=[{name:"AMC"},{name:"Beiersdorf"},{name:"DST",children:[{name:"Item"}]},{name:"Electrolux",children:[{name:"Item"}]},{name:"Fox"},{name:"Galderma"},{name:"Investa"},{name:"MCN"},{name:"Merisant",children:[{name:"Equal - APAC",children:[{name:"Design"},{name:"Stage"}]}]},{name:"Orchard",children:[{name:"Are Awesome"}]},{name:"Pfizer",children:[{name:"Item"}]},{name:"Variety",children:[{name:"Item"}]},{name:"Video Ezy"}],a.systemMenu=[{name:"Intranet",href:"/"},{name:"Projects Admin",href:"/"},{name:"Logout",href:"/"}];var c=b.path();"/"==c&&b.path("/page/amc"),a.$on("$routeChangeSuccess",function(b,c,d){a.$broadcast("routeChangeSuccess",{next:c,current:d})})}]);app.config(["$routeProvider","$httpProvider","$locationProvider",function(a,b,c){a.when("/page/:name",{templateUrl:"views/page.html",controller:"mainController"}).when("/page/:name/:sub*",{templateUrl:"views/page.html",controller:"mainController"}).when("/",{templateUrl:"views/page.html",controller:"mainController"}).otherwise({title:"404 - Page not found",redirectTo:"/404",template:"<h4>Whoops!</h4><p>Sorry! The page you've requested cannot be found</p>",controller:"mainController"}),c.html5Mode(!0)}]),app.factory("menu",["$rootScope","$filter",function(a,b){var c={selected:"",rootMenu:""},d=[],e=function(b){var b=b||{};a.$broadcast("menu.update",{options:b})},f=function(a){if(!angular.isUndefined(a)){d.push(a);for(var e in a.children)c.subItem==b("sanitize")(a.children[e].name)&&(a.children[e].customHREF=b("sanitize")(a.name)+"/",f(a.children[e]))}},g=function(a,b){var a=a||{};c=angular.extend({},c,a),d=[],angular.isDefined(c)&&f(c.rootMenu),c.rootMenu=d,angular.isDefined(b)&&0==b||angular.isUndefined(c)||e(c)};return{update:g,selected:c.selected,rootMenu:c.rootMenu}}]),app.factory("RecursionHelper",["$compile",function(a){return{compile:function(b,c){angular.isFunction(c)&&(c={post:c});var d,e=b.contents().remove();return{pre:c&&c.pre?c.pre:null,post:function(b,f){d||(d=a(e)),d(b,function(a){f.append(a)}),c&&c.post&&c.post.apply(null,arguments)}}}}}]),app.service("cache",["$cacheFactory","$http","$rootScope","$filter",function(a,b,c,d){function e(a){console.error("File not found: "+a)}var f=a("dataCache");this.find=function(a,g){var h=d("sanitize")(a),i=f.get(h);return c.forceRefresh&&(i=!1),i&&angular.isFunction(g)?void g.apply(this,[i]):void b.get(a).success(function(a){f.put(h,a),angular.isFunction(g)&&g.apply(this,[a])}).error(function(){e.apply(this,[a])})}}]),app.directive("tree",["RecursionHelper","menu",function(a,b){return{restrict:"E",scope:{root:"=",selected:"="},replace:!0,templateUrl:"static-templates/tree.html",compile:function(c,d,e){return a.compile(c,function(a,c,d){a.methods={toggleRoot:function(a){d.notRoot||b.update({rootMenu:a})},toggle:function(a){a.collapsed=!a.collapsed},changeData:function(a){d.notRoot&&(a.customHREF=d.parent+"/")},bindStuffToChild:function(b){a.parent=b},select:function(a){angular.isUndefined(a.name)||b.update({selected:a.name})}},d.notRoot&&(a.notRoot=!0)})}}}]),app.directive("breadcrumbs",["menu",function(a){return{restrict:"E",scope:{root:"=",selected:"="},replace:!0,templateUrl:"static-templates/breadcrumbs.html",link:function(b,c,d){a.update({rootMenu:b.root})}}}]),app.controller("mainController",["$rootScope","$scope","cache","menu","$filter","$location","$routeParams","$route",function(a,b,c,d,e,f,g,h){b.$on("menu.update",function(a,d){b.selected=d.options.selected,b.rootMenu=d.options.rootMenu;var f=angular.isDefined(b.rootMenu[0])?b.rootMenu[0].name:b.rootMenu.name;if(!angular.isUndefined(f)){var h=e("sanitize")(f),i=""!=d.options.subItem&&angular.isDefined(g.sub)?d.options.subItem:e("sanitize")(b.selected);c.find("/static/"+h+".json",function(a){b.page=angular.isDefined(i)&&angular.isDefined(a[h].subItem)&&angular.isDefined(a[h].subItem[i])?b.page=a[h].subItem[i]:a[h]})}}),b.$on("routeChangeSuccess",function(a,c){var f=c.next;if(!angular.isUndefined(f.params.name)){b.selected=f.params.name||g.name;var h=$.grep(Object.keys(b.menuItems),function(a){return e("sanitize")(b.menuItems[a].name)==b.selected});b.rootMenu=b.menuItems[h],d.update({rootMenu:b.rootMenu,selected:b.selected,subItem:f.params.sub||""})}})}]),app.filter("sanitize",[function(){return function(a){return angular.isUndefined(a)?"":angular.lowercase(a.replace(/(?:^\w|[A-Z]|\b\w)/g,function(a,b){return 0==b?a.toLowerCase():a.toUpperCase()}).replace(/\s+/g,""))}}]),app.filter("trust",["$sce",function(a){return function(b){return a.trustAsHtml(b)}}]);